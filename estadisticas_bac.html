<!DOCTYPE html>
<html lang="es">

<head>
    <!-- ... meta tags existentes ... -->
      <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Estadísticas</title>
    <link rel="icon" type="image/svg+xml" href="favicon.svg">
    <link rel="alternate icon" href="favicon.ico">

    <!-- Reemplaza todo el <style>...</style> con: -->
    <link rel="stylesheet" href="css/styles-common.css">
    <link rel="stylesheet" href="css/styles-estadisticas.css">
	<link rel="stylesheet" href="css/bottom-nav.css">
	
     <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
         <link href="https://fonts.googleapis.com/css2?family=Syne:wght@400;600;700;800&family=DM+Sans:wght@400;500;700&display=swap" rel="stylesheet">

    <!-- Librerías externas -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    
     <script>
        // Verificar sesión activa
        if (!sessionStorage.getItem('xisco_session_active')) {
            window.location.href = 'index.html';
        }
    </script>
</head>
<body>


    <div class="container">
    
 <!-- Header -->
<div class="page-header">
    <div class="header-content-wrapper">
        <div class="header-text">
            <h1>Estadísticas</h1>
            <p>Análisis de rendimiento deportivo</p>
        </div>
        <div class="header-image">
            <img src="/pool/images/banner.png" alt="Xisco">
        </div>
    </div>
</div>


        <div id="loading" class="loading">
            <div class="spinner"></div>
            <p>Cargando datos...</p>
        </div>

        <div id="error" style="display: none;"></div>

        <div id="fileUploadSection" style="display: none;">
            <div class="chart-card" style="max-width: 600px; margin: 40px auto; text-align: center;">
                <h2 style="font-size: 1.5rem; font-weight: 600; color: #1d1d1f; margin-bottom: 16px;">
                    Cargar datos
                </h2>
                <p style="color: #86868b; margin-bottom: 24px;">
                    No se encontraron datos en el servidor. Elige una opción:
                </p>
                <div style="display: flex; gap: 12px; justify-content: center; flex-wrap: wrap;">
                    <button onclick="loadFromRegistration()" class="action-btn primary" style="cursor: pointer; display: inline-block;">
                        Ir a Registro
                    </button>
                    <label for="jsonFileInput" class="action-btn secondary" style="cursor: pointer; display: inline-block;">
                        Subir JSON
                    </label>
                    <input type="file" id="jsonFileInput" accept=".json" style="display: none;">
                    <button onclick="loadDemoData()" class="action-btn secondary">
                        Cargar Demo
                    </button>
                </div>
            </div>
        </div>

        <div id="content" style="display: none;">
            <div class="stats-grid" id="statsGrid"></div>
            
  <div class="section">
                <div class="section-header">
                    <h2 class="section-title">Análisis visual</h2>
                    <p class="section-description">Gráficos interactivos de rendimiento</p>
                </div>
                <div class="charts-grid" id="chartsGrid"></div>
            </div>

            <div class="section">
                <div class="section-header">
                    <h2 class="section-title">Cómputo por Modalidad</h2>
                    <p class="section-description">Añade estadísticas manuales para generar análisis adicionales</p>
                </div>
                <div class="chart-card">
                    <div class="modality-inputs-grid">
                        <div class="modality-input-group">
                            <h3 class="modality-title">Bola 8</h3>
                            <div class="input-row">
                                <div class="input-field">
                                    <label>Partidos Jugados</label>
                                    <input type="number" id="bola8_played" min="0" value="0">
                                </div>
                                <div class="input-field">
                                    <label>Partidos Ganados</label>
                                    <input type="number" id="bola8_won" min="0" value="0">
                                </div>
                            </div>
                            <div class="input-row">
                                <div class="input-field">
                                    <label>Partidas Jugadas</label>
                                    <input type="number" id="bola8_games_played" min="0" value="0">
                                </div>
                                <div class="input-field">
                                    <label>Partidas Ganadas</label>
                                    <input type="number" id="bola8_games_won" min="0" value="0">
                                </div>
                            </div>
                        </div>

                        <div class="modality-input-group">
                            <h3 class="modality-title">Bola 9</h3>
                            <div class="input-row">
                                <div class="input-field">
                                    <label>Partidos Jugados</label>
                                    <input type="number" id="bola9_played" min="0" value="0">
                                </div>
                                <div class="input-field">
                                    <label>Partidos Ganados</label>
                                    <input type="number" id="bola9_won" min="0" value="0">
                                </div>
                            </div>
                            <div class="input-row">
                                <div class="input-field">
                                    <label>Partidas Jugadas</label>
                                    <input type="number" id="bola9_games_played" min="0" value="0">
                                </div>
                                <div class="input-field">
                                    <label>Partidas Ganadas</label>
                                    <input type="number" id="bola9_games_won" min="0" value="0">
                                </div>
                            </div>
                        </div>

                        <div class="modality-input-group">
                            <h3 class="modality-title">Bola 10</h3>
                            <div class="input-row">
                                <div class="input-field">
                                    <label>Partidos Jugados</label>
                                    <input type="number" id="bola10_played" min="0" value="0">
                                </div>
                                <div class="input-field">
                                    <label>Partidos Ganados</label>
                                    <input type="number" id="bola10_won" min="0" value="0">
                                </div>
                            </div>
                            <div class="input-row">
                                <div class="input-field">
                                    <label>Partidas Jugadas</label>
                                    <input type="number" id="bola10_games_played" min="0" value="0">
                                </div>
                                <div class="input-field">
                                    <label>Partidas Ganadas</label>
                                    <input type="number" id="bola10_games_won" min="0" value="0">
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="modality-actions">
                        <button id="calculateModalityBtn" class="action-btn primary">Calcular Estadísticas</button>
                        <button id="saveModalityBtn" class="action-btn secondary">Guardar en data.json</button>
                    </div>

                    <div id="modalityStats" style="display: none; margin-top: 32px;">

						
                        <div class="modality-stats-grid" id="modalityStatsGrid"></div>
                        <div class="charts-grid" id="modalityChartsGrid" style="margin-top: 24px;"></div>
                    </div>
                </div>
            </div>

            <div class="section" id="comparisonSection" style="display: none;">
                <div class="section-header">
                    <h2 class="section-title">Comparativa de jugadores</h2>
                    <p class="section-description">Análisis cara a cara de rendimiento</p>
                </div>
                <div class="chart-card">
                    <div class="player-selector">
                        <div class="player-select-wrapper">
                            <label class="player-select-label">Xisco</label>
                            <select id="player1Select"></select>
                        </div>
                        <div class="vs-divider">VS</div>
                        <div class="player-select-wrapper">
                            <label class="player-select-label">Rival</label>
                            <select id="player2Select"></select>
                        </div>
                    </div>
                    <div id="comparisonContent"></div>
                </div>
            </div>

            <div class="section">
                <div class="section-header">
                    <h2 class="section-title" id="historial">Historial</h2>
                    <p class="section-description">Registro completo de partidos</p>
                </div>
                
                <!-- Controles de paginación superior -->
                <div id="paginationTopStats" class="pagination-container-stats" style="display: none;"></div>
                
                <div class="chart-card full-width">
                    <div class="table-container">
                        <table class="matches-table" id="matchesTable"></table>
                    </div>
                </div>
                
                <!-- Controles de paginación inferior -->
                <div id="paginationBottomStats" class="pagination-container-stats" style="display: none;"></div>
            </div>
        </div>
    </div>
    <script src="js/common.js"></script>
<script src="js/estadisticas.js"></script>
	<script src="js/bottom-nav.js"></script>
	<script src="js/top-nav.js"></script>
</body>
</html>
